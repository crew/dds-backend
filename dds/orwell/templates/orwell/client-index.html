{% extends "orwell/base-index.html" %}
{% block title %}Clients{% endblock %}
{% block scripts %}
<script type="text/javascript" src="/media/js/clientindex.js"></script>
{% endblock %}

{% block content %}
<div class="adder">
Add A Client
</div>
<div class="addsession">
<table>
  {{ clients_form.as_table }}
</table>
<input type="submit" value="Add" />
</div>

<form id="clientfilterform">
<select id="locationselect">
  <option value="">--Location--</option>
  {% for loc in locations %}
  <option value="{{loc.id}}">{{loc}}</option>
  {% endfor %}
</select>
<select id="groupselect">
  <option value="">--Group--</option>
  {% for grp in groups %}
  <option value="{{grp.id}}">{{grp}}</option>
  {% endfor %}
</select>
<label for="showoffline">Display offline clients?</label>
<input type="checkbox" id="showoffline" checked="true">
<input type="reset" id="resetfilter">
</form>
<div id="clientarea">
{% for client in clients %}
<div class="clientbox {{client.get_class_tags}}"
  id="client-{{ client.id_hash }}">
  {% if client.active %}
  <img src="/media/screenshots/thumbnail-{{client.currentslide.id}}.png"
       alt="{{client.currentslide.title}}" class="slidepreview">
  {% else %}
  <img src="/media/images/offline.png" alt="Frontend Offline" 
       class="slidepreview">
  {% endif %}
  {{ client.id_user_part }}
  <div class="infopopup" title="{{client.client_id}}"
    id="infobox-{{ client.id_hash }}">
    <dl>
      <dt>Location</dt>
      <dd>{{ client.location }}</dd>
      <dt>Groups</dt>
      <dd>
        <ul>
          {% for g in client.groups.all %}
          <li>{{ g }}</li>
          {% endfor %}
        </ul>
      </dd>
    </dl>
  </div>
</div>
{% endfor %}
</div>
{% endblock %}
